import{d as O,r as p,y as j,o as z,ba as $,h as a,e as A,f as M,g as x,l as t,j as n,w as L,I as P,b as u,k as _,Z as T,aC as U,av as Z,ao as q,ap as G,V as H,_ as J}from"./index.f232c2d0.js";import{g as K}from"./system.71c7c56b.js";import{u as g}from"./hooks.3af1ed38.js";const Q=d=>(q("data-v-96d1ae4f"),d=d(),G(),d),W={class:"max-w-[260px] h-full min-h-[780px] bg-bg_color"},X={class:"flex items-center h-[34px]"},Y=Q(()=>x("p",{class:"flex-1 ml-2 font-bold text-base truncate",title:"\u90E8\u95E8\u5217\u8868"}," \u90E8\u95E8\u5217\u8868 ",-1)),ee=O({__name:"tree",setup(d){const E={children:"children",label:"name"},v=p([]),i=p(""),{proxy:C}=H(),y=p();let r=p({});const I=(l,e)=>l?e.name.includes(l):!0;function V(l){var o;const e=l.$treeNodeId;r.value[e]=(o=r.value[e])!=null&&o.highlight?Object.assign({id:e},r.value[e],{highlight:!1}):Object.assign({id:e},r.value[e],{highlight:!0}),Object.values(r.value).forEach(c=>{c.id!==e&&(c.highlight=!1)})}function f(l){let e=C.$refs.treeRef.store._getAllNodes();for(var o=0;o<e.length;o++)e[o].expanded=l}function N(){r.value={},i.value="",f(!0)}return j(i,l=>{y.value.filter(l)}),z(async()=>{let{data:l}=await K();v.value=$(l)}),(l,e)=>{const o=a("IconifyIconOffline"),c=a("el-icon"),D=a("el-input"),m=a("el-button"),h=a("el-dropdown-item"),R=a("el-dropdown-menu"),S=a("el-dropdown"),B=a("el-divider"),F=a("el-tree");return A(),M("div",W,[x("div",X,[Y,t(D,{style:{flex:"2"},size:"small",modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=s=>i.value=s),placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0",clearable:""},{suffix:n(()=>[t(c,{class:"el-input__icon"},{default:n(()=>[L(t(o,{icon:"search"},null,512),[[P,i.value.length===0]])]),_:1})]),_:1},8,["modelValue"]),t(S,null,{dropdown:n(()=>[t(R,null,{default:n(()=>[t(h,null,{default:n(()=>[t(m,{class:"reset-margin !h-[20px] !text-gray-500 dark:!text-white dark:hover:!text-primary",link:"",type:"primary",icon:u(g)("expand"),onClick:e[1]||(e[1]=s=>f(!0))},{default:n(()=>[_(" \u5C55\u5F00\u5168\u90E8 ")]),_:1},8,["icon"])]),_:1}),t(h,null,{default:n(()=>[t(m,{class:"reset-margin !h-[20px] !text-gray-500 dark:!text-white dark:hover:!text-primary",link:"",type:"primary",icon:u(g)("unExpand"),onClick:e[2]||(e[2]=s=>f(!1))},{default:n(()=>[_(" \u6298\u53E0\u5168\u90E8 ")]),_:1},8,["icon"])]),_:1}),t(h,null,{default:n(()=>[t(m,{class:"reset-margin !h-[20px] !text-gray-500 dark:!text-white dark:hover:!text-primary",link:"",type:"primary",icon:u(g)("reset"),onClick:N},{default:n(()=>[_(" \u91CD\u7F6E\u72B6\u6001 ")]),_:1},8,["icon"])]),_:1})]),_:1})]),default:n(()=>[t(o,{class:"w-[28px] cursor-pointer",width:"18px",icon:"more-vertical"})]),_:1})]),t(B),t(F,{ref_key:"treeRef",ref:y,data:v.value,"node-key":"id",size:"small",props:E,"default-expand-all":"","expand-on-click-node":!1,"filter-node-method":I,onNodeClick:V},{default:n(({node:s,data:k})=>{var w,b;return[x("span",{class:U(["pl-1","pr-1","rounded","flex","items-center","select-none",i.value.trim().length>0&&s.label.includes(i.value)&&"text-red-500",(w=u(r)[s.id])!=null&&w.highlight?"dark:text-primary":""]),style:Z({background:(b=u(r)[s.id])!=null&&b.highlight?"var(--el-color-primary-light-7)":"transparent"})},[t(o,{icon:k.type===1?"office-building":k.type===2?"location-company":"dept"},null,8,["icon"]),_(" "+T(s.label),1)],6)]}),_:1},8,["data"])])}}});const oe=J(ee,[["__scopeId","data-v-96d1ae4f"]]);export{oe as default};
