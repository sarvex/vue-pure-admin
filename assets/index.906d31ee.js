import{d as ne,r as w,az as q,A as a,b as e,aF as Te,aG as Ce,e as z,f as R,av as M,aC as ie,aH as W,aB as le,g as L,n as Me,aI as ke,a0 as xe}from"./index.e1e4118e.js";const Ee=()=>{window.cancelAnimationFrame=(()=>window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(u){return window.clearTimeout(u)})(),window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(u){return window.setTimeout(u,1e3/60)}}()},Be=(u,m)=>{if(u===m)return!0;if(u.length!==m.length)return!1;for(let s=0;s<u.length;++s)if(u[s]!==m[s])return!1;return!0};function oe(){Array.isArray||(Array.isArray=function(g){return Object.prototype.toString.call(g)==="[object Array]"});let u,m,s,c,S,C,t=1,i=arguments[0]||{},f=!1,b=arguments.length;if(typeof i=="boolean"&&(f=i,i=arguments[1]||{},t++),typeof i!="object"&&typeof i!="function"&&(i={}),t===b)return i;for(;t<b;t++)if((m=arguments[t])!=null)for(u in m)s=i[u],c=m[u],S=Array.isArray(c),f&&c&&(typeof c=="object"||S)?(S?(S=!1,C=s&&Array.isArray(s)?s:[]):C=s&&typeof s=="object"?s:{},i[u]=oe(f,C,c)):c!==void 0&&(i[u]=c);return i}const De=Object.freeze(Object.defineProperty({__proto__:null,animationFrame:Ee,arrayEqual:Be,copyObj:oe},Symbol.toStringTag,{value:"Module"})),He=["innerHTML"],Oe=ne({name:"ReSeamlessScroll"}),$e=ne({...Oe,props:{data:{type:Array},classOption:{type:Object}},emits:["scrollEnd"],setup(u,{expose:m,emit:s}){const c=u,{animationFrame:S,copyObj:C}=De;S();let t=w(0),i=w(0),f=w(0),b=w(0),g=w(0),F=w(0),k=w(0),x=w(""),y=null,Y=null,E=null,I=null,N=null,B=!1,D="ease-in",{classOption:h}=c;h.key===void 0&&(h.key=0);const U=q(`wrap${h.key}`,null),X=q(`slotList${h.key}`,null),V=q(`realBox${h.key}`,null);let G=a(()=>e(t)<0),J=a(()=>Math.abs(e(t))<e(F)-e(g)),ae=a(()=>({step:1,limitMoveNum:5,hoverStop:!0,direction:"top",openTouch:!0,singleHeight:0,singleWidth:0,waitTime:1e3,switchOffset:30,autoPlay:!0,navigation:!1,switchSingleStep:134,switchDelay:400,switchDisabledClass:"disabled",isSingleRemUnit:!1})),n=a(()=>C({},e(ae),h));const re=a(()=>e(G)?"":e(n).switchDisabledClass);let se=a(()=>e(J)?"":e(n).switchDisabledClass),ue=a(()=>({position:"absolute",margin:`${e(b)/2}px 0 0 -${e(n).switchOffset}px`,transform:"translate(-100%,-50%)"})),ce=a(()=>({position:"absolute",margin:`${e(b)/2}px 0 0 ${e(g)+e(n).switchOffset}px`,transform:"translateY(-50%)"})),H=a(()=>e(n).direction!=="bottom"&&e(n).direction!=="top"),K=a(()=>e(H)?{float:"left",overflow:"hidden"}:{overflow:"hidden"}),fe=a(()=>({transform:`translate(${e(t)}px,${e(i)}px)`,transition:`all ${D} ${e(f)}ms`,overflow:"hidden"})),O=a(()=>e(n).navigation),$=a(()=>e(O)?!1:e(n).autoPlay),Q=a(()=>c.data.length>=e(n).limitMoveNum),Z=a(()=>e(n).hoverStop&&e($)&&e(Q)),P=a(()=>e(n).openTouch),ee=a(()=>e(n).isSingleRemUnit?parseInt(window.getComputedStyle(document.documentElement,null).fontSize):1),_=a(()=>e(n).singleWidth*e(ee)),j=a(()=>e(n).singleHeight*e(ee)),p=a(()=>{let l,o=e(n).step;if(e(H)?l=e(_):l=e(j),l>0&&l%o>0)throw"\u5982\u679C\u8BBE\u7F6E\u4E86\u5355\u6B65\u6EDA\u52A8\uFF0Cstep\u9700\u662F\u5355\u6B65\u5927\u5C0F\u7684\u7EA6\u6570\uFF0C\u5426\u5219\u65E0\u6CD5\u4FDD\u8BC1\u5355\u6B65\u6EDA\u52A8\u7ED3\u675F\u7684\u4F4D\u7F6E\u662F\u5426\u51C6\u786E";return o});function me(){t.value=0,i.value=0,A(),te()}function he(){if(!!e(G)){if(Math.abs(e(t))<e(n).switchSingleStep){t.value=0;return}t.value+=e(n).switchSingleStep}}function de(){if(!!e(J)){if(e(F)-e(g)+e(t)<e(n).switchSingleStep){t.value=e(g)-e(F);return}t.value-=e(n).switchSingleStep}}function A(){cancelAnimationFrame(Y||"")}function pe(l){if(!e(P))return;let o;const r=l.targetTouches[0],{waitTime:d,singleHeight:T,singleWidth:Ae}=e(n);E={x:r.pageX,y:r.pageY},I=e(i),N=e(t),!!T&&!!Ae?(o&&clearTimeout(o),o=setTimeout(()=>{A()},d+20)):A()}function ve(l){if(!e(P)||l.targetTouches.length>1||l.scale&&l.scale!==1)return;const o=l.targetTouches[0],{direction:r}=e(n);let d={x:o.pageX-E.x,y:o.pageY-E.y};l.preventDefault();const T=Math.abs(d.x)<Math.abs(d.y)?1:0;T===1&&r==="bottom"||T===1&&r==="top"?i.value=I+d.y:(T===0&&r==="left"||T===0&&r==="right")&&(t.value=N+d.x)}function we(){if(!e(P))return;let l;const o=e(n).direction;if(f.value=50,o==="top")e(i)>0&&(i.value=0);else if(o==="bottom"){let r=e(k)/2*-1;e(i)<r&&(i.value=r)}else if(o==="left")e(t)>0&&(t.value=0);else if(o==="right"){let r=e(F)*-1;e(t)<r&&(t.value=r)}l&&clearTimeout(l),l=setTimeout(()=>{f.value=0,v()},e(f))}function ge(){e(Z)&&be()}function ye(){e(Z)&&Se()}function v(){B||(Y=requestAnimationFrame(function(){const l=e(k)/2,o=e(F)/2;let{direction:r,waitTime:d}=e(n);r==="top"?(Math.abs(e(i))>=l&&(s("scrollEnd"),i.value=0),i.value-=p.value):r==="bottom"?(e(i)>=0&&(s("scrollEnd"),i.value=l*-1),i.value+=p.value):r==="left"?(Math.abs(e(t))>=o&&(s("scrollEnd"),t.value=0),t.value-=p.value):r==="right"&&(e(t)>=0&&(s("scrollEnd"),t.value=o*-1),t.value+=p.value),y&&clearTimeout(y),e(j)?Math.abs(e(i))%e(j)<e(p)?y=setTimeout(()=>{v()},d):v():e(_)&&Math.abs(e(t))%e(_)<e(p)?y=setTimeout(()=>{v()},d):v()}))}function te(){Me(()=>{const{switchDelay:l}=e(n);if(x.value="",e(H)){b.value=e(U).offsetHeight,g.value=e(U).offsetWidth;let o=e(X).offsetWidth;e($)&&(o=o*2+1),e(V).style.width=o+"px",F.value=o}if(e($))D="ease-in",f.value=0;else{D="linear",f.value=l;return}e(Q)?(x.value=e(X).innerHTML,setTimeout(()=>{var o;k.value=(o=e(V))==null?void 0:o.offsetHeight,v()},0)):(A(),i.value=t.value=0)})}function Se(){B=!1,v()}function be(){B=!0,y&&clearTimeout(y),A()}function Fe(l){e(n).direction==="left"||e(n).direction==="right"||ke(()=>{l.deltaY>0?i.value-=p.value:i.value+=p.value},50)()}return Te(()=>{te()}),Ce(()=>{A(),clearTimeout(y)}),m({reset:me}),(l,o)=>(z(),R("div",{ref:"wrap"+e(h).key},[e(O)?(z(),R("div",{key:0,style:M(e(ue)),class:ie(e(re)),onClick:he},[W(l.$slots,"left-switch")],6)):le("",!0),e(O)?(z(),R("div",{key:1,style:M(e(ce)),class:ie(e(se)),onClick:de},[W(l.$slots,"right-switch")],6)):le("",!0),L("div",{ref:"realBox"+e(h).key,style:M(e(fe)),onMouseenter:ge,onMouseleave:ye,onTouchstartPassive:pe,onTouchmovePassive:ve,onTouchend:we,onMousewheelPassive:Fe},[L("div",{ref:"slotList"+e(h).key,style:M(e(K))},[W(l.$slots,"default")],4),L("div",{innerHTML:e(x),style:M(e(K))},null,12,He)],36)],512))}}),Pe=xe($e),je=Pe;export{je as S};
